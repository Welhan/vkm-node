<div class="card bg-secondary text-white">
    <div class="card-header bg-primary">Prize Leaderboard
    </div>
    <div class="card-body">
        <% if (successMessage && successMessage[0] !=undefined ) { %>
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                <i class="fa fa-exclamation-circle me-2"></i>
                <%= successMessage[0] %>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <% } %>
                <% if (errorMessage && errorMessage[0] !=undefined ) { %>
                    <div class="alert alert-danger alert-dismissible fade show" role="alert">
                        <i class="fa fa-exclamation-circle me-2"></i>
                        <%= errorMessage[0] %>
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    <% } %>
                        <input type="hidden" name="_csrf" id="_csrf" value="<%= csrfToken %>">
                        <div class="accordion" id="accordionExample">
                            <div class="row mb-3">
                                <div class="col">
                                    <div class="accordion-item bg-primary">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#collapseOne" aria-expanded="true"
                                                aria-controls="collapseOne">
                                                Top 50 Player
                                            </button>
                                        </h2>
                                        <div id="collapseOne" class="accordion-collapse collapse show bg-white"
                                            data-bs-parent="#accordionExample">
                                            <form class="Top50Tier">
                                                <div class="accordion-body">
                                                    <div class="row">
                                                        <div class="col">
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 1</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white"
                                                                    oninput="preventNegativeInput(event)" id="rank1"
                                                                    onchange="calculateRank()" step="0.0001"
                                                                    name="rank1" value="<%= dataTop50Tier.rank1 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 2</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white"
                                                                    oninput="preventNegativeInput(event)" id="rank2"
                                                                    onchange="calculateRank()" step="0.0001"
                                                                    name="rank2" value="<%= dataTop50Tier.rank2 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 3</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white"
                                                                    oninput="preventNegativeInput(event)" id="rank3"
                                                                    onchange="calculateRank()" step="0.0001"
                                                                    name="rank3" value="<%= dataTop50Tier.rank3 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 4</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white"
                                                                    oninput="preventNegativeInput(event)" id="rank4"
                                                                    onchange="calculateRank()" step="0.0001"
                                                                    name="rank4" value="<%= dataTop50Tier.rank4 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 5</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white"
                                                                    oninput="preventNegativeInput(event)" id="rank5"
                                                                    onchange="calculateRank()" step="0.0001"
                                                                    name="rank5" value="<%= dataTop50Tier.rank5 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 6</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white"
                                                                    oninput="preventNegativeInput(event)" id="rank6"
                                                                    onchange="calculateRank()" step="0.0001"
                                                                    name="rank6" value="<%= dataTop50Tier.rank6 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 7</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white"
                                                                    oninput="preventNegativeInput(event)" id="rank7"
                                                                    onchange="calculateRank()" step="0.0001"
                                                                    name="rank7" value="<%= dataTop50Tier.rank7 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 8</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white"
                                                                    oninput="preventNegativeInput(event)"
                                                                    value="<%= dataTop50Tier.rank8 %>" id="rank8"
                                                                    onchange="calculateRank()" step="0.0001"
                                                                    name="rank8">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 9</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white"
                                                                    oninput="preventNegativeInput(event)" id="rank9"
                                                                    onchange="calculateRank()" step="0.0001"
                                                                    name="rank9" value="<%= dataTop50Tier.rank9 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 10</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white"
                                                                    oninput="preventNegativeInput(event)" id="rank10"
                                                                    onchange="calculateRank()" step="0.0001"
                                                                    name="rank10" value="<%= dataTop50Tier.rank10 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group">
                                                                <span class="input-group-text">Rank 11 - 50</span>
                                                                <input type="text" id="sisa"
                                                                    class="form-control bg-white"
                                                                    oninput="preventNegativeInput(event)"
                                                                    value="<%= sisaPersentaseTop50Tier %>" disabled>
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                        </div>
                                                        <div class="col">
                                                            <div class="mb-3">
                                                                <div class="input-group mb-3">
                                                                    <span>Total Hadiah Bronze</span>
                                                                </div>
                                                                <div class="input-group mb-3">
                                                                    <span class="input-group-text">Rp</span>
                                                                    <input type="text" id="total_bronze"
                                                                        name="total_bronze"
                                                                        value="<%= dataTotalHadiah.Bronze %>"
                                                                        oninput="preventNegativeInput(event)"
                                                                        class="form-control bg-white autonumeric">
                                                                </div>
                                                            </div>
                                                            <div class="mb-3">
                                                                <div class="input-group mb-3">
                                                                    <span>Total Hadiah Silver</span>
                                                                </div>
                                                                <div class="input-group mb-3">
                                                                    <span class="input-group-text">Rp</span>
                                                                    <input type="text" id="total_silver"
                                                                        name="total_silver"
                                                                        class="form-control bg-white autonumeric"
                                                                        oninput="preventNegativeInput(event)"
                                                                        value="<%= dataTotalHadiah.Silver %>">
                                                                </div>
                                                            </div>
                                                            <div class="mb-3">
                                                                <div class="input-group mb-3">
                                                                    <span>Total Hadiah Gold</span>
                                                                </div>
                                                                <div class="input-group mb-3">
                                                                    <span class="input-group-text">Rp</span>
                                                                    <input type="text" id="total_gold" name="total_gold"
                                                                        class="form-control bg-white autonumeric"
                                                                        oninput="preventNegativeInput(event)"
                                                                        value="<%= dataTotalHadiah.Gold %>">
                                                                </div>
                                                            </div>
                                                            <div class="mb-3">
                                                                <div class="input-group mb-3">
                                                                    <span>Total Hadiah Platinum</span>
                                                                </div>
                                                                <div class="input-group mb-3">
                                                                    <span class="input-group-text">Rp</span>
                                                                    <input type="text" id="total_platinum"
                                                                        name="total_platinum"
                                                                        class="form-control bg-white autonumeric"
                                                                        oninput="preventNegativeInput(event)"
                                                                        value="<%= dataTotalHadiah.Platinum %>">
                                                                </div>
                                                            </div>
                                                            <div class="mb-3">
                                                                <div class="input-group mb-3">
                                                                    <span>Total Hadiah Diamond</span>
                                                                </div>
                                                                <div class="input-group mb-3">
                                                                    <span class="input-group-text">Rp</span>
                                                                    <input type="text" id="total_diamond"
                                                                        name="total_diamond"
                                                                        class="form-control bg-white autonumeric"
                                                                        oninput="preventNegativeInput(event)"
                                                                        value="<%= dataTotalHadiah.Diamond %>">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="accordion-footer">
                                                    <div class="card-footer text-end">
                                                        <button type="submit" class="btn btn-primary"
                                                            id="btnSaveTop50Tier">Save</button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="accordion-item bg-primary">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#collapseTwo"
                                                aria-expanded="false" aria-controls="collapseTwo">
                                                Top 50 Withdraw
                                            </button>
                                        </h2>
                                        <div id="collapseTwo" class="accordion-collapse collapse bg-white"
                                            data-bs-parent="#accordionExample">
                                            <form class="Top50WD">
                                                <div class="accordion-body">
                                                    <div class="row">
                                                        <div class="col">
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 1</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white" id="rank1wd"
                                                                    step="0.0001" name="rank1"
                                                                    oninput="preventNegativeInput(event)"
                                                                    value="<%= dataTop50WD.rank1 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 2</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white" id="rank2wd"
                                                                    step="0.0001" name="rank2"
                                                                    oninput="preventNegativeInput(event)"
                                                                    value="<%= dataTop50WD.rank2 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 3</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white" id="rank3wd"
                                                                    step="0.0001" name="rank3"
                                                                    oninput="preventNegativeInput(event)"
                                                                    value="<%= dataTop50WD.rank3 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 4</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white" id="rank4wd"
                                                                    step="0.0001" name="rank4"
                                                                    oninput="preventNegativeInput(event)"
                                                                    value="<%= dataTop50WD.rank4 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 5</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white" id="rank5wd"
                                                                    step="0.0001" name="rank5"
                                                                    oninput="preventNegativeInput(event)"
                                                                    value="<%= dataTop50WD.rank5 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 6</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white" id="rank6wd"
                                                                    step="0.0001" name="rank6"
                                                                    oninput="preventNegativeInput(event)"
                                                                    value="<%= dataTop50WD.rank6 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 7</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white" id="rank7wd"
                                                                    step="0.0001" name="rank7"
                                                                    oninput="preventNegativeInput(event)"
                                                                    value="<%= dataTop50WD.rank7 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 8</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white" id="rank8wd"
                                                                    step="0.0001" name="rank8"
                                                                    oninput="preventNegativeInput(event)"
                                                                    value="<%= dataTop50WD.rank8 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 9</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white" id="rank9wd"
                                                                    step="0.0001" name="rank9"
                                                                    oninput="preventNegativeInput(event)"
                                                                    value="<%= dataTop50WD.rank9 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Rank 10</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white" id="rank10wd"
                                                                    step="0.0001" name="rank10"
                                                                    oninput="preventNegativeInput(event)"
                                                                    value="<%= dataTop50WD.rank10 %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group">
                                                                <span class="input-group-text">Rank 11 - 50</span>
                                                                <input type="text" id="otherRank" name="otherRank"
                                                                    oninput="preventNegativeInput(event)"
                                                                    class="form-control bg-white"
                                                                    value="<%= dataTop50WD.otherRank %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="accordion-footer">
                                                    <div class="card-footer text-end">
                                                        <button type="submit" class="btn btn-primary"
                                                            id="btnSaveTop50WD">Save</button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col">
                                    <div class="accordion-item bg-primary">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#collapseThree"
                                                aria-expanded="false" aria-controls="collapseThree">
                                                Top 50 Category
                                            </button>
                                        </h2>
                                        <div id="collapseThree" class="accordion-collapse collapse bg-white"
                                            data-bs-parent="#accordionExample">
                                            <form class="TopCategory">
                                                <div class="accordion-body">
                                                    <div class="row">
                                                        <div class="col">
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Slot</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white" id="slot"
                                                                    step="0.0001" name="slot"
                                                                    oninput="preventNegativeInput(event)"
                                                                    value="<%= dataTopCategory.Slot %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                            <div class="input-group mb-3">
                                                                <span class="input-group-text">Casino</span>
                                                                <input type="number" min="0" max="100"
                                                                    class="form-control bg-white" id="casino"
                                                                    step="0.0001" name="casino"
                                                                    oninput="preventNegativeInput(event)"
                                                                    value="<%= dataTopCategory.Casino %>">
                                                                <span class="input-group-text">%</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="accordion-footer">
                                                    <div class="card-footer text-end">
                                                        <button type="submit" class="btn btn-primary"
                                                            id="btnSaveTopCategory">Save</button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="accordion-item bg-primary">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#collapseFourth"
                                                aria-expanded="false" aria-controls="collapseFourth">
                                                Level Up Bonus
                                            </button>
                                        </h2>
                                        <div id="collapseFourth" class="accordion-collapse collapse bg-white"
                                            data-bs-parent="#accordionExample">
                                            <form class="LevelUp">
                                                <div class="accordion-body">
                                                    <div class="row">
                                                        <div class="col">
                                                            <div class="mb-3">
                                                                <div class="input-group mb-3">
                                                                    <span>Bronze</span>
                                                                </div>
                                                                <div class="input-group mb-3">
                                                                    <span class="input-group-text">Rp</span>
                                                                    <input type="text" id="levelup_bronze"
                                                                        name="levelup_bronze"
                                                                        class="form-control bg-white autonumeric"
                                                                        oninput="preventNegativeInput(event)"
                                                                        value="<%= dataLevelUpBonus.Bronze %>">
                                                                </div>
                                                            </div>
                                                            <div class="mb-3">
                                                                <div class="input-group mb-3">
                                                                    <span>Silver</span>
                                                                </div>
                                                                <div class="input-group mb-3">
                                                                    <span class="input-group-text">Rp</span>
                                                                    <input type="text" id="levelup_silver"
                                                                        name="levelup_silver"
                                                                        class="form-control bg-white autonumeric"
                                                                        oninput="preventNegativeInput(event)"
                                                                        value="<%= dataLevelUpBonus.Silver %>">
                                                                </div>
                                                            </div>
                                                            <div class="mb-3">
                                                                <div class="input-group mb-3">
                                                                    <span>Gold</span>
                                                                </div>
                                                                <div class="input-group mb-3">
                                                                    <span class="input-group-text">Rp</span>
                                                                    <input type="text" id="levelup_gold"
                                                                        name="levelup_gold"
                                                                        class="form-control bg-white autonumeric"
                                                                        oninput="preventNegativeInput(event)"
                                                                        value="<%= dataLevelUpBonus.Gold %>">
                                                                </div>
                                                            </div>
                                                            <div class="mb-3">
                                                                <div class="input-group mb-3">
                                                                    <span>Platinum</span>
                                                                </div>
                                                                <div class="input-group mb-3">
                                                                    <span class="input-group-text">Rp</span>
                                                                    <input type="text" id="levelup_platinum"
                                                                        name="levelup_platinum"
                                                                        class="form-control bg-white autonumeric"
                                                                        oninput="preventNegativeInput(event)"
                                                                        value="<%= dataLevelUpBonus.Platinum %>">
                                                                </div>
                                                            </div>
                                                            <div class="mb-3">
                                                                <div class="input-group mb-3">
                                                                    <span>Diamond</span>
                                                                </div>
                                                                <div class="input-group mb-3">
                                                                    <span class="input-group-text">Rp</span>
                                                                    <input type="text" id="levelup_diamond"
                                                                        name="levelup_diamond"
                                                                        class="form-control bg-white autonumeric"
                                                                        oninput="preventNegativeInput(event)"
                                                                        value="<%= dataLevelUpBonus.Diamond %>">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="accordion-footer">
                                                    <div class="card-footer text-end">
                                                        <button type="submit" class="btn btn-primary"
                                                            id="btnSaveLevelUp">Save</button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.8.1/socket.io.js"
    integrity="sha512-8BHxHDLsOHx+flIrQ0DrZcea7MkHqRU5GbTHmbdzMRnAaoCIkZ97PqZcXJkKZckMMhqfoeaJE+DNUVuyoQsO3Q=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<% scripts=`%>
    <script>
        $(document).ready(function () {
            new AutoNumeric.multiple('.autonumeric', {
                decimalCharacter: ',',
                digitGroupSeparator: '.',
                decimalPlaces: 0,
                unformatOnSubmit: true
            });
        })
        function calculateRank() {
            const rank1 = parseFloat($("#rank1").val()) || 0
            const rank2 = parseFloat($("#rank2").val()) || 0
            const rank3 = parseFloat($("#rank3").val()) || 0
            const rank4 = parseFloat($("#rank4").val()) || 0
            const rank5 = parseFloat($("#rank5").val()) || 0
            const rank6 = parseFloat($("#rank6").val()) || 0
            const rank7 = parseFloat($("#rank7").val()) || 0
            const rank8 = parseFloat($("#rank8").val()) || 0
            const rank9 = parseFloat($("#rank9").val()) || 0
            const rank10 = parseFloat($("#rank10").val()) || 0
            const total = ((100 - (rank1 + rank2 + rank3 + rank4 + rank5 + rank6 + rank7 + rank8 + rank9 + rank10)) / 40)
            $("#sisa").val(total)
        }
    </script>
    <script>
        $(".Top50Tier").on('submit', function (e) {
            e.preventDefault();
            let formData = $(this).serializeArray();
            $('.autonumeric').each(function () {
                let unformattedValue = AutoNumeric.getNumber(this);
                formData = formData.filter(item => item.name !== this.name);
                formData.push({ name: this.name, value: unformattedValue });
            });

            formData.push({ name: '_csrf', value: $("#_csrf").val() });
            $.ajax({
                url: '/saveTop50TierPrize',
                type: 'POST',
                dataType: 'json',
                data: $.param(formData),
                beforeSend: function () {
                    $("#btnSaveTop50Tier").prop('disabled', true).text('Saving...');
                },
                success: function (response) {
                    window.location.reload();
                },
                error: function (xhr, status, error) {
                    const errorMessage = xhr.responseJSON?.message || 'An error occurred. Please try again.';
                    alert(errorMessage);
                },
                complete: function () {
                    $("#btnSaveTop50Tier").prop('disabled', false).text('Save');
                }
            });
        });
        $(".Top50WD").on('submit', function (e) {
            e.preventDefault()
            let rank1 = $("#rank1wd").val()
            let rank2 = $("#rank2wd").val()
            let rank3 = $("#rank3wd").val()
            let rank4 = $("#rank4wd").val()
            let rank5 = $("#rank5wd").val()
            let rank6 = $("#rank6wd").val()
            let rank7 = $("#rank7wd").val()
            let rank8 = $("#rank8wd").val()
            let rank9 = $("#rank9wd").val()
            let rank10 = $("#rank10wd").val()
            let otherRank = $("#otherRank").val()
            let data = {
                rank1: rank1,
                rank2: rank2,
                rank3: rank3,
                rank4: rank4,
                rank5: rank5,
                rank6: rank6,
                rank7: rank7,
                rank8: rank8,
                rank9: rank9,
                rank10: rank10,
                otherRank: otherRank,
                _csrf: $("#_csrf").val()
            }
            $.ajax({
                url: '/saveTop50WithdrawPrize',
                type: 'POST',
                dataType: 'json',
                data: data,
                beforeSend: function () {
                    $("#btnSaveTop50WD").prop('disabled', true).text('Saving...')
                },
                success: function (response) {
                    window.location.reload()
                },
                error: function (xhr, status, error) {
                    const errorMessage = xhr.responseJSON?.message || 'An error occurred. Please try again.'
                    alert(errorMessage)
                },
                complete: function () {
                    $("#btnSaveTop50WD").prop('disabled', false).text('Save')
                }
            })
        })
        $(".TopCategory").on('submit', function (e) {
            e.preventDefault()
            let formData = $(this).serializeArray()
            formData.push({ name: '_csrf', value: $("#_csrf").val() })
            $.ajax({
                url: '/saveTopCategoryPrize',
                type: 'POST',
                dataType: 'json',
                data: $.param(formData),
                beforeSend: function () {
                    $("#btnSaveTopCategory").prop('disabled', true).text('Saving...')
                },
                success: function (response) {
                    window.location.reload()
                },
                error: function (xhr, status, error) {
                    const errorMessage = xhr.responseJSON?.message || 'An error occurred. Please try again.'
                    alert(errorMessage)
                },
                complete: function () {
                    $("#btnSaveTopCategory").prop('disabled', false).text('Save')
                }
            })
        })
        $(".LevelUp").on('submit', function (e) {
            e.preventDefault()
            let formData = $(this).serializeArray()
            $('.autonumeric').each(function () {
                let unformattedValue = AutoNumeric.getNumber(this)
                formData = formData.filter(item => item.name !== this.name)
                formData.push({ name: this.name, value: unformattedValue })
            })
            formData.push({ name: '_csrf', value: $("#_csrf").val() })
            $.ajax({
                url: '/saveLevelUpBonusPrize',
                type: 'POST',
                dataType: 'json',
                data: $.param(formData),
                beforeSend: function () {
                    $("#btnSaveLevelUp").prop('disabled', true).text('Saving...')
                },
                success: function (response) {
                    window.location.reload()
                },
                error: function (xhr, status, error) {
                    const errorMessage = xhr.responseJSON?.message || 'An error occurred. Please try again.'
                    alert(errorMessage)
                },
                complete: function () {
                    $("#btnSaveLevelUp").prop('disabled', false).text('Save')
                }
            })
        })
        function preventNegativeInput(event) {
            if (event.target.value < 0) {
                event.target.value = 0;
            }
        }
    </script>
    <%` %>